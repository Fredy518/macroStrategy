# 宏观事件数量敏感性测试 - 快速入门

## 🚀 快速开始

### 1. 运行敏感性测试

```bash
# 进入项目目录
cd refactored_macro_strategy

# 运行示例程序
python examples/run_example.py
```

### 2. 选择敏感性测试选项

在菜单中选择以下选项之一：

- **18. 价值成长敏感性分析** - 测试价值成长策略在不同信号数量下的表现
- **19. 大小盘敏感性分析** - 测试大小盘策略在不同信号数量下的表现  
- **20. 双策略敏感性分析** - 同时测试两个策略并进行对比
- **21. 自定义敏感性分析** - 自定义策略类型和信号数量
- **22. 敏感性分析信息概览** - 查看测试原理和信号排序

## 📊 测试内容

### 测试信号数量
默认测试使用前 **5, 7, 9, 11, 13** 个宏观事件进行投票

> **注意**: 虽然当前投票策略配置使用11个信号（基于测试结果），但敏感性分析仍需测试13个信号，以验证11个信号确实优于13个信号的结论。

### 策略类型
- **价值成长策略**: ValueR vs GrowthR 轮动
- **大小盘策略**: BigR vs SmallR 轮动

### 投票机制
使用**多数票决定持仓方向**（获胜者全拿），而非按比例投票

## 🎯 信号排序

### 价值成长策略 (前5个信号)
1. **long_loan_newadded_MA12_yoy** - 中长期贷款增量(MA12)当月同比超预期3月-1方向
2. **M2_M1** - M2-M1历史新高3月1方向
3. **newstarts_area_yoy** - 房屋新开工面积当月同比历史新高3月1方向
4. **CPI_PPI** - CPI-PPI历史新高6月-1方向
5. **US_BOND_5Y** - 美国5年期国债收益率超预期12月1方向

### 大小盘策略 (前5个信号)
1. **local_gov_budget_MA12_yoy** - 地方政府预算收入(MA12)当月同比历史高位6月1方向
2. **pmi_manufacturing_neworder** - 制造业PMI新订单历史新低6月1方向
3. **pmi_manufacturing** - 制造业PMI历史高位6月1方向
4. **completed_yoy** - 房屋竣工面积当月同比历史新高3月-1方向
5. **CN_BOND_1Y** - 中国1年期国债收益率历史新高3月1方向

## 📈 分析指标

### 稳定性指标
- **年化收益率稳定性** - 不同信号数量下收益率的标准差
- **夏普比率稳定性** - 不同信号数量下夏普比率的标准差
- **超额收益稳定性** - 不同信号数量下超额收益的标准差
- **信息比率稳定性** - 不同信号数量下信息比率的标准差
- **月胜率稳定性** - 不同信号数量下月胜率的标准差

### 优化指标
- **最佳信号数量** - 基于信息比率的最优信号数量
- **最稳定信号范围** - 相邻信号数量间变化最小的范围

### 趋势分析
- **收益率趋势** - 随信号数量增加的收益率变化趋势
- **夏普比率趋势** - 随信号数量增加的夏普比率变化趋势
- **信息比率趋势** - 随信号数量增加的信息比率变化趋势

## 📁 输出文件

测试完成后会在 `signal_test_results/` 目录生成以下文件：

### 单策略敏感性分析
文件名: `sensitivity_analysis_{strategy_type}_{timestamp}.xlsx`

包含工作表：
- **敏感性分析摘要** - 不同信号数量的绩效对比表
- **稳定性指标** - 各项稳定性指标统计
- **绩效趋势分析** - 趋势方向和斜率分析
- **N信号_年度绩效** - 各信号数量的年度表现
- **N信号_净值曲线** - 各信号数量的净值数据

### 跨策略敏感性比较
文件名: `cross_strategy_sensitivity_comparison_{timestamp}.xlsx`

包含工作表：
- **跨策略敏感性比较** - 两个策略表现对比
- **稳定性对比** - 两个策略稳定性指标对比

## 🔍 结果解读

### 稳定性指标解读
- **数值越小** = 策略在不同信号数量下越稳定
- **最佳信号数量** = 信息比率最高的信号数量
- **最稳定范围** = 策略表现变化最小的信号数量区间

### 趋势分析解读
- **上升趋势** = 信号数量增加有助于提升该指标
- **下降趋势** = 信号数量增加会降低该指标
- **稳定趋势** = 信号数量变化对该指标影响较小

### 实际应用建议
1. **优先选择稳定性高的信号数量**
2. **结合最佳信号数量和稳定范围做决策**
3. **关注趋势分析，了解边际效应**
4. **考虑业务逻辑和实施复杂度**

## ⚡ 快速示例

### 运行价值成长敏感性测试
```bash
python examples/run_example.py
# 选择 18
```

### 运行双策略对比测试
```bash
python examples/run_example.py
# 选择 20
```

### 查看信号排序信息
```bash
python examples/run_example.py
# 选择 22
```

## 🛠️ 自定义测试

选择 **21. 自定义敏感性分析** 可以：
- 选择策略类型（价值成长 或 大小盘）
- 自定义测试的信号数量（如：3,5,7,9,11,13）
- 获得个性化的敏感性分析结果

## 📞 技术支持

如有问题，请参考：
- `SENSITIVITY_ANALYSIS_GUIDE.md` - 详细技术文档
- `examples/sensitivity_test_example.py` - 代码示例
- `test_sensitivity.py` - 功能验证脚本

---

**注意**: 敏感性测试需要完整的宏观指标数据文件，请确保数据文件路径正确且包含所需的指标和价格数据。 